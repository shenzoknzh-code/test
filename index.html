<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dot Matrix Number Printer</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    canvas {
        border: 1px solid #ddd;
        margin-top: 20px;
    }
</style>
</head>
<body>

<h3>Dot Matrix Number Printer</h3>

<label>Masukkan Nomor:</label><br>
<input id="inputText" type="text" value="17223-23-01-000485-2" style="width:280px; font-size:16px;"><br><br>

<label>Ukuran Font:</label><br>
<input id="fontSize" type="number" value="32"><br><br>

<label>Spacing Antar Huruf:</label><br>
<input id="letterSpace" type="number" value="2"><br><br>

<button onclick="draw()">Render</button>
<button onclick="window.print()">Print</button>

<canvas id="outCanvas"></canvas>

<script>
function draw() {
    const text = document.getElementById("inputText").value;
    const scale = Number(document.getElementById("fontSize").value);
    const letterSpace = Number(document.getElementById("letterSpace").value);
    const canvas = document.getElementById("outCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = Math.max(600, text.length * (scale * 0.7));
    canvas.height = scale * 2;

    ctx.fillStyle = "#FFFFFF";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // ===============================
    // FONT FIX â€“ zero (0) tanpa titik
    // ===============================
    ctx.font = scale + "px 'Courier Prime Code', 'Courier', 'Nimbus Mono', monospace";
    ctx.fontKerning = "none";
    ctx.textRendering = "geometricPrecision";
    // ===============================

    ctx.fillStyle = "#0033cc"; // biru mirip tinta dot-matrix
    ctx.textBaseline = "middle";

    let x = 10;
    const y = canvas.height / 2;

    for (let i = 0; i < text.length; i++) {
        ctx.fillText(text[i], x, y);
        x += ctx.measureText(text[i]).width + letterSpace;
    }
}
</script>

</body>
</html>
